# Course Generation Orchestrator Brief

## Mission
Generate complete SSi language course from canonical English seeds.

**Course**: gle_for_eng_30seeds
**Target Language**: gle (learning language)
**Known Language**: eng (learner's language)
**Seeds**: 30 (total canonical sentences to process)

---

## Your Role

You are the **course generation orchestrator**. You will execute all 7 phases sequentially in this single Claude Code session. Work autonomously - read specs, execute phases, write outputs, report status.

---

## Key Files

**APML Specification** (Single Source of Truth):
`/Users/tomcassidy/SSi/ssi-dashboard-v7-clean/ssi-course-production.apml`
- Read this FIRST
- Contains all phase prompts and rules
- VERSION: 7.3.0

**Course Directory** (Your workspace):
`/Users/tomcassidy/SSi/ssi-dashboard-v7-clean/vfs/courses/gle_for_eng_30seeds`
- Write all outputs here
- VFS structure pre-created (amino_acids/, phase_outputs/, proteins/)

**Canonical Seeds** (Input data):
`/Users/tomcassidy/SSi/SSi_Course_Production/vfs/seeds/canonical_seeds.json`
- 668 English sentences to translate and process

---

## Phase Execution Sequence

Execute phases in order. Each phase reads from APML for detailed instructions.

### Phase 0: Corpus Pre-Analysis
- **Input**: canonical_seeds.json
- **Output**: phase_outputs/phase_0_intelligence.json
- **Prompt**: Read from APML Phase 0 section
- **Purpose**: Analyze corpus for pedagogical translation

### Phase 1: Pedagogical Translation
- **Input**: canonical_seeds.json + phase_0_intelligence.json
- **Output**: amino_acids/translations/*.json (30 files)
- **Prompt**: Read from APML Phase 1 section
- **Purpose**: Apply 6 heuristics, create optimized translations
- **Critical**: Two-step process (canonical→target→known)

### Phase 2: Corpus Intelligence
- **Input**: amino_acids/translations/*.json
- **Output**: phase_outputs/phase_2_corpus_intelligence.json
- **Prompt**: Read from APML Phase 2 section
- **Purpose**: Map FCFS order, calculate utility scores

### Phase 3: LEGO Extraction
- **Input**: amino_acids/translations/*.json + phase_2_corpus_intelligence.json
- **Output**: amino_acids/legos/*.json
- **Prompt**: Read from APML Phase 3 section
- **Purpose**: Extract FD-compliant LEGOs (BASE + COMPOSITE using TILING test)
- **Critical**: FD_LOOP test, IRON RULE, TILING test

### Phase 3.5: Graph Construction
- **Input**: amino_acids/legos/*.json
- **Output**: phase_outputs/phase_3.5_lego_graph.json
- **Prompt**: Read from APML Phase 3.5 section
- **Purpose**: Build adjacency graph for pattern coverage

### Phase 4: Deduplication
- **Input**: amino_acids/legos/*.json
- **Output**: amino_acids/legos_deduplicated/*.json
- **Prompt**: Read from APML Phase 4 section
- **Purpose**: Merge duplicate LEGOs, preserve provenance

### Phase 5: Basket Generation
- **Input**: amino_acids/legos_deduplicated/*.json + phase_3.5_lego_graph.json
- **Output**: phase_outputs/phase_5_baskets.json
- **Prompt**: Read from APML Phase 5 section
- **Purpose**: Generate e-phrases + d-phrases with progressive vocabulary
- **Critical**: 7-10 word e-phrases, perfect target grammar

### Phase 6: Introductions
- **Input**: phase_outputs/phase_5_baskets.json + amino_acids/legos_deduplicated/*.json
- **Output**: amino_acids/introductions/*.json
- **Prompt**: Read from APML Phase 6 section
- **Purpose**: Generate zero-unknowns introductions for COMPOSITE LEGOs

---

## Critical Rules

1. **Read APML First**: All phase details are in ssi-course-production.apml
2. **Sequential Execution**: Complete each phase before starting next
3. **Write to VFS**: All outputs go to /Users/tomcassidy/SSi/ssi-dashboard-v7-clean/vfs/courses/gle_for_eng_30seeds
4. **Quality Validation**: After Phase 5, spot-check 5-10 baskets for grammar
5. **Report Status**: At end, report completion or failure with specifics

---

## Quality Checkpoints

### After Phase 1
- Spot-check 5 translations: Natural? High-frequency vocabulary?

### After Phase 3
- Spot-check 10 LEGOs: Pass FD_LOOP? IRON RULE compliant? TILING correct?

### After Phase 5
- Spot-check 10 baskets: 7-10 word e-phrases? Perfect target grammar?
- Check for grammar errors (e.g., Italian: cercando di, imparando a)

If critical issues found: Document them, but continue (self-healing on next run).

---

## Success Criteria

✅ All 7 phases executed
✅ Phase outputs written to VFS
✅ No critical errors (translations natural, LEGOs FD-compliant, baskets grammatical)
✅ Status reported

---

## Failure Handling

If any phase fails:
1. Document specific error
2. Note which seeds/LEGOs/baskets affected
3. Report failure status with details
4. Do NOT continue to next phase

---

## Final Report Format

After Phase 6 (or on failure), report:

```
✅ Course Generation Complete: gle_for_eng_30seeds

Phase 0: ✅ Corpus analyzed
Phase 1: ✅ 30 translations created
Phase 2: ✅ FCFS intelligence generated
Phase 3: ✅ [X] LEGOs extracted ([Y] BASE, [Z] COMPOSITE)
Phase 3.5: ✅ Adjacency graph built
Phase 4: ✅ [X] unique LEGOs (deduplicated)
Phase 5: ✅ [X] baskets generated
Phase 6: ✅ Introductions created

Quality Checks:
- Translations: [Natural/Issues found]
- LEGOs: [FD-compliant/Issues found]
- Baskets: [Grammar perfect/Issues found]

Status: COMPLETE
Next: Review in dashboard at https://ssi-dashboard-v7.vercel.app
```

---

## Begin Execution

Read APML spec, execute Phase 0, proceed sequentially through Phase 6, report status.
